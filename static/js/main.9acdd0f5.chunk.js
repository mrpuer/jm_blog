(this.webpackJsonpjm_blog=this.webpackJsonpjm_blog||[]).push([[0],{249:function(e,t,a){e.exports=a(496)},495:function(e,t,a){},496:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),o=a.n(s),u=a(40),i=a(80),c=a(20),l=a(231),m=a(232),d=a(498),b=a(500),p=a(504),g={user:{},isLogged:!1},f=Object(b.a)({USER_LOGIN_SUCCESS:function(e,t){return{user:t.payload.user,isLogged:!0}},USER_REGISTER_SUCCESS:function(e,t){return{user:t.payload.newUser,isLogged:!0}},USER_LOGOUT:function(){return p.a.success("Logout successful!"),g}},g),E=a(56),h=a(25),v=a(503),j=a(33),w=j.object().shape({email:j.string().email("Incorrect email address").required("Email is required field"),password:j.string().required("You need type your password")}),y=j.object().shape({email:j.string().email("Invalid email address").required("Email is required field"),password:j.string().required("Password is required field").matches(/^(?=^.{8,40}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z]).*$/,"Password must contains 8-40 latin symbols, one on upper case, and one digit"),passwordRepeat:j.string().oneOf([j.ref("password"),null],"Password must match"),username:j.string().required("Username is required field").min(3,"Username must contains more that 3 symbols").max(50,"Username must contains less that 50 symbols"),bio:j.string(),image:j.string().url("Image URL incorrect")}),S=a(499),L=a(55),O=a(238),k=a(502),C=function(e){return function(t){var a=t.field,n=t.form,s=t.hasFeedback,o=t.label,u=t.submitCount,i=t.type,c=Object(O.a)(t,["field","form","hasFeedback","label","submitCount","type"]),l=n.touched[a.name],m=u>0,d=n.errors[a.name],b=d&&m,p=d&&l;return r.a.createElement(S.a.Item,{label:o,hasFeedback:s&&m||s&&l,help:!(!b&&!p)&&d,validateStatus:b||p?"error":"success"},r.a.createElement(e,Object.assign({},a,c,{onBlur:function(){return n.setFieldTouched(a.name,!0)},onChange:i?function(e){var t=e.target.value;return n.setFieldValue(a.name,t)}:function(e){return n.setFieldValue(a.name,e)}})))}},R=C(k.a),_=C(k.a.Password),U=function(e){var t=e.data,a=t.submitCount,n=t.isSubmitting;return r.a.createElement(h.b,{className:"form"},r.a.createElement(h.a,{name:"username",type:"text",label:"Username",component:R,submitCount:a,hasFeedback:!0}),r.a.createElement(h.a,{name:"email",type:"email",label:"Email",component:R,submitCount:a,hasFeedback:!0}),r.a.createElement(h.a,{name:"password",type:"password",label:"Password",component:_,submitCount:a,hasFeedback:!0}),r.a.createElement(h.a,{name:"passwordRepeat",type:"password",label:"Repeat password",component:_,submitCount:a,hasFeedback:!0}),r.a.createElement(S.a.Item,null,r.a.createElement(L.a,{type:"primary",htmlType:"submit",disabled:n},"Register")))};U.defaultProps={data:{submitCount:0,isSubmitting:!1}};var I=U,F=a(43),x=a.n(F),P=a(84),T=a(505),N=a(242),q=a(98),G=a.n(q),B=new function e(){Object(N.a)(this,e),this.register=function(){var e=Object(P.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("/users",{user:t});case 2:return a=e.sent,n=a.data.user,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(P.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.post("/users/login",{user:t});case 2:return a=e.sent,n=a.data.user,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G.a.defaults.baseURL="https://conduit.productionready.io/api/",G.a.defaults.headers={ContentType:"application/json; charset=utf-8"}},H=Object(T.a)("USER_REGISTER_REQUEST"),V=Object(T.a)("USER_REGISTER_SUCCESS"),W=Object(T.a)("USER_LOGIN_SUCCESS"),A=Object(T.a)("USER_LOGOUT"),J={email:"",password:"",username:""},M={registerHandler:function(e){return function(){var t=Object(P.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(H()),t.next=3,B.register(e);case 3:n=t.sent,a(V({newUser:n}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},$=Object(c.b)(null,M)((function(e){var t=e.registerHandler;return r.a.createElement(h.c,{initialValues:J,validationSchema:y,onSubmit:function(e,a){var n=a.setSubmitting;n(!0),t(e).then((function(){p.a.success("Register successful!"),n(!1)})).catch((function(e){var t=e.response;v.a.error({title:"Register Error:",content:Object.keys(t.data.errors).map((function(e){return"".concat(e," ").concat(t.data.errors[e][0])})).join("\n")}),n(!1)}))}},(function(e){return r.a.createElement(I,{data:e})}))})),z=function(e){var t=e.isLogged;return r.a.createElement(E.b,{path:"/jm_blog/register",render:function(){return t?r.a.createElement(E.a,{to:{pathname:"/jm_blog/user"}}):r.a.createElement($,null)}})};z.defaultProps={isLogged:!1};var K=Object(c.b)((function(e){return{isLogged:e.isLogged}}))(z),Y=Object(c.b)((function(e){return{user:e.user}}))((function(e){var t=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Welcome ",t.username,"!"),r.a.createElement("div",null,"Your email - ",t.email))})),D=function(e){var t=e.isLogged;return r.a.createElement(E.b,{path:"/jm_blog/user",render:function(){return t?r.a.createElement(Y,null):r.a.createElement(E.a,{to:{pathname:"/jm_blog"}})}})};D.defaultProps={isLogged:!1};var Q=Object(c.b)((function(e){return{isLogged:e.isLogged}}))(D),Z=function(e){var t=e.data,a=t.submitCount,n=t.isSubmitting;return r.a.createElement(h.b,{className:"form"},r.a.createElement(h.a,{name:"email",type:"email",label:"Email",component:R,submitCount:a,hasFeedback:!0}),r.a.createElement(h.a,{name:"password",type:"password",label:"Password",component:_,submitCount:a,hasFeedback:!0}),r.a.createElement(S.a.Item,null,r.a.createElement(L.a,{type:"primary",htmlType:"submit",disabled:n},"Login")))};Z.defaultProps={data:{submitCount:0,isSubmitting:!1}};var X=Z,ee={email:"",password:""},te={loginHandler:function(e){return function(){var t=Object(P.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.login(e);case 2:n=t.sent,a(W({user:n}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ae=Object(c.b)(null,te)((function(e){var t=e.loginHandler;return r.a.createElement(h.c,{initialValues:ee,validationSchema:w,onSubmit:function(e,a){var n=a.setSubmitting;n(!0),t(e).then((function(){p.a.success("Login successful!"),n(!1)})).catch((function(e){var t=e.response;v.a.error({title:"Login Error:",content:Object.keys(t.data.errors).map((function(e){return"".concat(e," ").concat(t.data.errors[e][0])})).join("\n")}),n(!1)}))}},(function(e){return r.a.createElement(X,{data:e})}))})),ne=function(e){var t=e.isLogged;return r.a.createElement(E.b,{path:"/jm_blog",exact:!0,render:function(){return t?r.a.createElement(E.a,{to:{pathname:"/jm_blog/user"}}):r.a.createElement(ae,null)}})};ne.defaultProps={isLogged:!1};var re=Object(c.b)((function(e){return{isLogged:e.isLogged}}))(ne),se=a(501),oe=function(e){var t=e.isLogged,a=e.handleLogout;return t?r.a.createElement(se.a,{className:"menu",theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]},r.a.createElement(se.a.Item,{key:"1",onClick:a},"Logout")):r.a.createElement(se.a,{className:"menu",theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]},r.a.createElement(se.a.Item,{key:"1"},r.a.createElement(u.b,{to:"/jm_blog"},"Login")),r.a.createElement(se.a.Item,{key:"2"},r.a.createElement(u.b,{to:"/jm_blog/register"},"Register")))};oe.defaultProps={isLogged:!1};var ue={handleLogout:A},ie=Object(c.b)((function(e){return{isLogged:e.isLogged}}),ue)(oe),ce=d.a.Header,le=function(){return r.a.createElement(ce,null,r.a.createElement("h1",{className:"logo"},r.a.createElement(u.b,{to:"/jm_blog"},"Blog")),r.a.createElement(ie,null))},me=d.a.Footer,de=function(){return r.a.createElement(me,{style:{textAlign:"center"}},"Java Mentor Blog Platform \xa92019 Vladimir Mytnik")},be=d.a.Content,pe=Object(i.createStore)(f,Object(m.composeWithDevTools)(Object(i.applyMiddleware)(l.a))),ge=function(){return r.a.createElement(c.a,{store:pe},r.a.createElement(u.a,null,r.a.createElement(d.a,null,r.a.createElement(le,null),r.a.createElement(be,{className:"main"},r.a.createElement(re,null),r.a.createElement(K,null),r.a.createElement(Q,null)),r.a.createElement(de,{className:"footer"}))))};a(493),a(494),a(495),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ge,{className:"App"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[249,1,2]]]);
//# sourceMappingURL=main.9acdd0f5.chunk.js.map